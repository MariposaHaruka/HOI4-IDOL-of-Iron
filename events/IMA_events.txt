add_namespace = IMA_haruka_crisis
add_namespace = IMA_great_depression
add_namespace = IMA_global
add_namespace = IMA_bankrupt
add_namespace = IMA_westminster_diplomacy
add_namespace = IMA_dominion
add_namespace = IMA_diplomacy

### 하루카 위기 이벤트
country_event = {
	id = IMA_haruka_crisis.1 #리버풀 신년 시위
	title = IMA_haruka_crisis.1.t
	desc = IMA_haruka_crisis.1.desc
	is_triggered_only = yes
	
	option = {
		name = IMA_haruka_crisis.1.a
		ai_chance = { 
			base = 99 
			modifier = {
				add = -99
				is_historical_focus_on = no
			}
		}
		subtract_from_variable = {
			IMA_left_anger = 1
			tooltip = IMA_left_anger_subtract_tt
		}
		add_to_variable = {
			IMA_right_anger = 1
			tooltip = IMA_right_anger_add_tt
		}
		hidden_effect = {
			set_country_flag = IMA_liverpool_draft
		}
	}

	option = {
		name = IMA_haruka_crisis.1.b
		ai_chance = { 
			base = 0
			modifier = {
				add = 99
				is_historical_focus_on = no
			}
		}
		add_to_variable = {
			IMA_left_anger = 1
			tooltip = IMA_left_anger_add_tt
		}
		subtract_from_variable = {
			IMA_right_anger = 1
			tooltip = IMA_right_anger_subtract_tt
		}
		hidden_effect = {
			set_country_flag = IMA_liverpool_draft
		}
	}

	option = {
		name = IMA_haruka_crisis.1.c
		ai_chance = { 
			base = 0 
			modifier = {
				add = 99
				is_historical_focus_on = no
			}
		}
		add_political_power = -50
		hidden_effect = {
			set_country_flag = IMA_liverpool_draft
		}
	}
}

country_event = {
	id = IMA_haruka_crisis.2 #케이블가 행진
	title = IMA_haruka_crisis.2.t
	desc = IMA_haruka_crisis.2.desc
	is_triggered_only = yes
	
	option = {
		name = IMA_haruka_crisis.2.a
		ai_chance = { 
			base = 99 
			modifier = {
				add = -99
				is_historical_focus_on = no
			}
		}
		complete_national_focus = IMA_50001
		custom_effect_tooltip = generic_line_break_tt
		add_to_variable = {
			IMA_left_anger = 1
			tooltip = IMA_left_anger_add_tt
		}
		subtract_from_variable = {
			IMA_right_anger = 1
			tooltip = IMA_right_anger_subtract_tt
		}
		hidden_effect = {
			set_country_flag = IMA_london_march
		}
	}

	option = {
		name = IMA_haruka_crisis.2.b
		ai_chance = { 
			base = 0
			modifier = {
				add = 99
				is_historical_focus_on = no
			}
		}
		complete_national_focus = IMA_50001
		custom_effect_tooltip = generic_line_break_tt
		subtract_from_variable = {
			IMA_left_anger = 1
			tooltip = IMA_left_anger_subtract_tt
		}
		add_to_variable = {
			IMA_right_anger = 1
			tooltip = IMA_right_anger_add_tt
		}
		hidden_effect = {
			set_country_flag = IMA_london_march
		}
	}

	option = {
		name = IMA_haruka_crisis.2.c
		ai_chance = { 
			base = 0 
			modifier = {
				add = 99
				is_historical_focus_on = no
			}
		}
		complete_national_focus = IMA_50001
		add_political_power = -50
		hidden_effect = {
			set_country_flag = IMA_london_march
		}
	}
}

country_event = {
	id = IMA_haruka_crisis.3 #국민노동당 문제
	title = IMA_haruka_crisis.3.t
	desc = IMA_haruka_crisis.3.desc
	is_triggered_only = yes
	
	option = {
		name = IMA_haruka_crisis.3.a #아미 안
		ai_chance = { 
			base = 0 
			modifier = {
				add = 99
				is_historical_focus_on = no
			}
		}
		trigger = { check_variable = { IMA_left_anger < 4 } }
		complete_national_focus = IMA_50002
		custom_effect_tooltip = generic_line_break_tt
		add_to_variable = {
			IMA_left_anger = 1
			tooltip = IMA_left_anger_add_tt
		}
	}

	option = {
		name = IMA_haruka_crisis.3.b #마미 안
		ai_chance = { 
			base = 0
			modifier = {
				add = 99
				is_historical_focus_on = no
			}
		}
		complete_national_focus = IMA_50002
		custom_effect_tooltip = generic_line_break_tt
		subtract_from_variable = {
			IMA_left_anger = 1
			tooltip = IMA_left_anger_subtract_tt
		}
		add_to_variable = {
			IMA_right_anger = 1
			tooltip = IMA_right_anger_add_tt
		}
		hidden_effect = {
			set_country_flag = IMA_labour_integrate_failed
		}
	}

	option = {
		name = IMA_haruka_crisis.3.c
		ai_chance = { 
			base = 0 
			modifier = {
				add = 99
				is_historical_focus_on = no
			}
		}
		set_party_name = {
			ideology = progressivism
			long_name = IMA_progressivism_party1_long_tt
			name = IMA_progressivism_party1_tt
		}
		trigger = { check_variable = { IMA_left_anger > 3 } }
		complete_national_focus = IMA_50002
		custom_effect_tooltip = generic_line_break_tt
		add_to_variable = {
			IMA_right_anger = 1
			tooltip = IMA_right_anger_add_tt
		}
		hidden_effect = {
			set_temp_variable = { coalition_partner_var = token:progressivism }
			remove_from_coalition = yes
		}
	}
}

country_event = {
	id = IMA_haruka_crisis.4 #자유국민당
	title = IMA_haruka_crisis.4.t
	desc = IMA_haruka_crisis.4.desc
	is_triggered_only = yes
	
	option = {
		name = IMA_haruka_crisis.4.a #치하야의 승리
		ai_chance = { 
			base = 99 
			modifier = {
				add = -99
				is_historical_focus_on = no
			}
		}
		trigger = { check_variable = { IMA_right_anger < 4 } }
		complete_national_focus = IMA_50003
		custom_effect_tooltip = generic_line_break_tt
		custom_effect_tooltip = IMA_chihaya_liberalism_tt
		custom_effect_tooltip = generic_line_break_tt
		subtract_from_variable = {
			IMA_left_anger = 1
			tooltip = IMA_left_anger_subtract_tt
		}
	}

	option = {
		name = IMA_haruka_crisis.4.b #이오리의 승리
		ai_chance = { 
			base = 0
			modifier = {
				add = 99
				is_historical_focus_on = no
			}
		}
		trigger = { check_variable = { IMA_right_anger > 3 } }
		complete_national_focus = IMA_50003
		custom_effect_tooltip = generic_line_break_tt
		custom_effect_tooltip = IMA_iori_liberalism_tt
		custom_effect_tooltip = generic_line_break_tt
		add_to_variable = {
			IMA_left_anger = 1
			tooltip = IMA_left_anger_add_tt
		
		}if = {
			limit = { IMA = { has_completed_focus = IMA_12001 } }
			subtract_from_variable = {
				IMA_right_anger = 1
				tooltip = IMA_right_anger_subtract_tt
			}
		}
		hidden_effect = {
			set_temp_variable = { coalition_partner_var = token:liberalism_mod }
			remove_from_coalition = yes
			set_country_flag = IMA_minase_elected
		}
	}
}

country_event = {
	id = IMA_haruka_crisis.5 #보수당 총재 불신임 선거
	title = IMA_haruka_crisis.4.t
	desc = IMA_haruka_crisis.4.desc
	is_triggered_only = yes
	
	option = {
		name = IMA_haruka_crisis.5.a #하루카의 승리
		ai_chance = { 
			base = 99 
			modifier = {
				add = -99
				is_historical_focus_on = no
			}
		}
		trigger = { check_variable = { IMA_right_anger < 5 } }
		complete_national_focus = IMA_50004
		custom_effect_tooltip = IMA_haruka_conservatism_tt
		if = {
			limit = { IMA = { has_completed_focus = IMA_11001 } }
			subtract_from_variable = {
				IMA_left_anger = 1
				tooltip = IMA_left_anger_subtract_tt
			}
		}
	}

	option = {
		name = IMA_haruka_crisis.4.b #아즈사의 승리
		ai_chance = { 
			base = 0
			modifier = {
				add = 99
				is_historical_focus_on = no
			}
		}
		trigger = { check_variable = { IMA_right_anger > 4 } }
		complete_national_focus = IMA_50004
		custom_effect_tooltip = IMA_azusa_conservatism_tt
		add_to_variable = {
			IMA_left_anger = 1
			tooltip = IMA_left_anger_add_tt
		}
		hidden_effect = {
			set_country_flag = IMA_miura_rebellion
			clr_country_flag = IMA_haruka_exist
			country_event = { id = IMA_haruka_crisis.6 days = 30 }
		}
	}
}

country_event = {
	id = IMA_haruka_crisis.6 #수상 불신임 선거
	title = IMA_haruka_crisis.6.t
	desc = IMA_haruka_crisis.6.desc
	is_triggered_only = yes
	
	option = {
		name = IMA_haruka_crisis.6.a #하루카의 승리
		ai_chance = { 
			base = 99 
			modifier = {
				add = -99
				is_historical_focus_on = no
			}
		}
		trigger = { 
			check_variable = { IMA_left_anger < 5 } 
			check_variable = { IMA_right_anger < 5 } 
		}
		complete_national_focus = IMA_51001
		complete_national_focus = IMA_51002a
		
	}

	option = {
		name = IMA_haruka_crisis.6.b #아즈사의 승리
		ai_chance = { 
			base = 0
			modifier = {
				add = 99
				is_historical_focus_on = no
			}
		}
		trigger = { check_variable = { IMA_right_anger > 4 } }
		complete_national_focus = IMA_50004
		custom_effect_tooltip = IMA_left_anger_add_tt
		hidden_effect = {
			add_to_variable = { IMA_left_anger = 1 }
		}
		custom_effect_tooltip = IMA_azusa_conservatism_tt
		hidden_effect = {
			clr_country_flag = IMA_haruka_exist
		}
	}
}


### 대공황 이벤트
country_event = {
	id = IMA_great_depression.1 #경제 회복 선언
	title = IMA_great_depression.1.t
	desc = IMA_great_depression.1.desc
	is_triggered_only = yes
	fire_only_once = yes
	picture = GFX_report_event_chamberlain_announce
	
	option = {
		name = IMA_great_depression.1.a #그것 참 좋은 소식이네
		ai_chance = { 
			base = 99
		}
		if = {
			limit = { has_country_flag = IMA_haruka_crisis }
			subtract_from_variable = {
				IMA_left_anger = 2
				tooltip = IMA_left_anger_subtract_tt
			}
			subtract_from_variable = {
				IMA_right_anger = 2
				tooltip = IMA_right_anger_subtract_tt
			}
			custom_effect_tooltip = generic_line_break_tt
		}
		add_stability = 0.1
		hidden_effect = {
			remove_ideas = IMA_great_depression_3
			set_country_flag = IMA_depression_overcomed
			news_event = { id = IMA_global.2 hours = 6 }
		}
	}
}

news_event = {
	id = IMA_global.2 #경제 회복 선언
	title = IMA_global.2.t
	desc = IMA_global.2.desc
	is_triggered_only = yes
	picture = GFX_news_event_019
	
	option = {
		name = IMA_global.2.a #그것 참 좋은 소식이네
		ai_chance = { 
			base = 99
		}
		trigger = {
			OR = {
				is_subject_of = IMA
				is_in_faction_with = IMA
				is_democratic = yes
			}
		}
	}

	option = {
		name = IMA_global.2.b #...
		ai_chance = { 
			base = 99
		}
		trigger = {
			NOT = {
				is_subject_of = IMA
				is_in_faction_with = IMA
				is_democratic = yes
			}
		}
	}
}

###

news_event = {
	id = IMA_global.1 #리버풀 신년 시위
	title = IMA_global.1.t
	desc = IMA_global.1.desc
	is_triggered_only = yes
	
	option = {
		name = IMA_global.1.a
		ai_chance = { 
			base = 99 
		}
	}
}


### 남코 연방 모라토리엄 이벤트
country_event = {
	id = IMA_bankrupt.1 #남코 연방 모라토리엄 선언
	title = IMA_bankrupt.1.t
	desc = IMA_bankrupt.1.desc
	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = IMA_bankrupt.1.a #으악 안돼!
		ai_chance = { 
			base = 99
		}
		add_ideas = IMA_bankrupted
		custom_effect_tooltip = IMA_left_anger_add_tt
		custom_effect_tooltip = IMA_right_anger_add_tt
		add_to_variable = { IMA_left_anger = 2 }
		add_to_variable = { IMA_right_anger = 2 }
		custom_effect_tooltip = generic_line_break_tt
		custom_effect_tooltip = IMA_bankrupt_tt
		hidden_effect = {
			set_country_flag = IMA_bankrupt_flag
			if = {
				limit = { has_idea = IMA_great_depression_1 }
				swap_ideas = {
					remove_idea = IMA_great_depression_1
					add_idea = IMA_great_depression_ex
				}
			}
			else_if = {
				limit = { has_idea = IMA_great_depression_2 }
				swap_ideas = {
					remove_idea = IMA_great_depression_2
					add_idea = IMA_great_depression_1
				}
			}
			else_if = {
				limit = { has_idea = IMA_great_depression_3 }
				swap_ideas = {
					remove_idea = IMA_great_depression_3
					add_idea = IMA_great_depression_2
				}
			}
		}
	}
}

news_event = {
	id = IMA_global.3 #남코 연방의 모라토리엄 선언
	title = IMA_global.3.t
	desc = IMA_global.3.desc
	is_triggered_only = yes
	picture = GFX_news_event_019
	
	option = {
		name = IMA_global.3.a #저런...
		ai_chance = { 
			base = 99
		}
	}
}

### 남코 연방 2차대전 이벤트
country_event = {
	id = IMA_global.11 #성 조지 작전 개시
	title = IMA_global.11.t
	desc = IMA_global.11.desc
	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = IMA_global.11.a #저 간악한 파시즘 세력을 무찌르러 가자!
		ai_chance = { 
			base = 99
		}
		trigger = {
			NOT = {
				any_country = {
					is_subject_of = IMA 
					has_country_flag = IMA_boston_promise
				}
			}
		}
		hidden_effect = {
			news_event = { id = IMA_global.14 hours = 6 }
		}
	}
	
	option = {
		name = IMA_global.11.b #저 간악한 파시즘 세력을 무찌르러 가자!
		ai_chance = { 
			base = 99
		}
		trigger = {
			NOT = {
				any_country = {
					is_subject_of = IMA 
					has_country_flag = IMA_boston_promise
				}
			}
		}
		hidden_effect = {
			country_event = { id = IMA_global.13 hours = 3 }
			news_event = { id = IMA_global.14 hours = 6 }
		}
	}
}

country_event = {
	id = IMA_global.12 #유럽에서의 전쟁
	title = IMA_global.12.t
	desc = IMA_global.12.desc
	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = IMA_global.12.a #또 다시 시작이군...
		ai_chance = { 
			base = 99
		}
		trigger = {
			NOT = {
				any_country = {
					is_subject_of = IMA 
					has_country_flag = IMA_boston_promise
				}
			}
		}
		hidden_effect = {
			news_event = { id = IMA_global.14 hours = 6 }
		}
	}
	
	option = {
		name = IMA_global.12.b #또 다시 시작이군...
		ai_chance = { 
			base = 99
		}
		trigger = {
			NOT = {
				any_country = {
					is_subject_of = IMA 
					has_country_flag = IMA_boston_promise
				}
			}
		}
		hidden_effect = {
			country_event = { id = IMA_global.13 hours = 3 }
			news_event = { id = IMA_global.14 hours = 6 }
		}
	}
}

country_event = {
	id = IMA_global.13 #보스턴 회담에 따른 약속 이행
	title = IMA_global.13.t
	desc = IMA_global.13.desc
	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = IMA_global.12.a #으악 안돼!
		ai_chance = { 
			base = 99
		}
	}
}

#티저드 미션 이벤트
country_event = {
	id = IMA_westminster_diplomacy.1
	title = IMA_westminster_diplomacy.1.t
	desc = IMA_westminster_diplomacy.1.d
	picture = GFX_report_event_physics_lab_01
	
	is_triggered_only = yes
	
	option = {
		name = IMA_westminster_diplomacy.1.a	#sounds good
		ai_chance = { base = 90 }
		add_political_power = -10
		IMA = {
			country_event = { days = 1 id = IMA_westminster_diplomacy.2 }
			add_opinion_modifier = {
				target = ROOT
				modifier = tizard_relations
			}
		}
		add_breakthrough_progress = {
			specialization = specialization_air
			value = 0.75
		}
		add_tech_bonus = {
			name = tizard_mission_focus
			uses = 1
			bonus = 1
			category = light_fighter
		}
	}
	
	option = {
		name = IMA_westminster_diplomacy.1.b	#no way 
		ai_chance = { base = 10 }
		#
		IMA = {
			country_event = { days = 1 id = IMA_westminster_diplomacy.3 }
			add_opinion_modifier = { 
				target = ROOT 
				modifier = tizard_refused 
			}
		}
	}

	option = {
		name = IMA_westminster_diplomacy.1.c	#tech_sharing
		ai_chance = { base = 90 }
		add_political_power = -10
		IMA = {
			country_event = { days = 1 id = IMA_westminster_diplomacy.4 }
			add_opinion_modifier = {
				target = ROOT
				modifier = tizard_relations
			}
		}
		add_to_tech_sharing_group = tizard_mission
	}
}

# USA helps
country_event = {
	id = IMA_westminster_diplomacy.2
	title = IMA_westminster_diplomacy.2.t
	desc = IMA_westminster_diplomacy.2.d
	picture = GFX_report_event_physics_lab_02

	is_triggered_only = yes
	
	option = {
		name = IMA_westminster_diplomacy.2.a
		add_breakthrough_progress = {
			specialization = specialization_air
			value = 0.75
		}
		add_tech_bonus = {
			name = tizard_mission_focus
			bonus = 0.5 # was 1
			category = light_fighter
		}
		add_tech_bonus = {
			name = tizard_mission_focus
			bonus = 0.5 # was 1
			uses = 1 # was 2
			category = radar_tech
		}
		FROM = {
			add_opinion_modifier = { 
				target = IMA 
				modifier = tizard_relations 
			}
		}
	}
}

# USA says no
country_event = {
	id = IMA_westminster_diplomacy.3
	title = IMA_westminster_diplomacy.3.t
	desc = IMA_westminster_diplomacy.3.d
	picture = GFX_report_event_physics_lab_01

	is_triggered_only = yes
	
	option = {
		name = IMA_westminster_diplomacy.3.a
		FROM = {
			add_opinion_modifier = { 
				target = IMA 
				modifier = tizard_refused 
			}
		}
	}
}

country_event = {
	id = IMA_westminster_diplomacy.4
	title = IMA_westminster_diplomacy.4.t
	desc = IMA_westminster_diplomacy.4.d
	picture = GFX_report_event_physics_lab_02

	is_triggered_only = yes
	
	option = {
		name = IMA_westminster_diplomacy.4.a
		add_to_tech_sharing_group = tizard_mission
		FROM = {
			add_opinion_modifier = { 
				target = IMA 
				modifier = tizard_relations 
			}
		}
	}
}

### 해외 자치령 논의 이벤트
country_event = {
	id = IMA_dominion.1 #정치 논의
	title = IMA_dominion.1.t
	desc = IMA_dominion.1.d
	picture = GFX_report_event_canada_treaty

	is_triggered_only = yes
	
	option = {
		name = IMA_dominion.1.a
		add_autonomy_ratio = { 
			value = 0.5
			localization = IMA_DO002
		}
	}
}

country_event = {
	id = IMA_dominion.2 #정치 논의
	title = IMA_dominion.2.t
	desc = IMA_dominion.2.d
	picture = GFX_report_event_canada_treaty

	is_triggered_only = yes
	
	option = {
		name = IMA_dominion.2.a
		add_autonomy_ratio = { 
			value = 0.5
			localization = IMA_DO003
		}
	}
}

country_event = {
	id = IMA_dominion.3 #정치 논의
	title = IMA_dominion.3.t
	desc = IMA_dominion.3.d
	picture = GFX_report_event_canada_treaty

	is_triggered_only = yes
	
	option = {
		name = IMA_dominion.3.a
		add_autonomy_ratio = { 
			value = 0.5
			localization = IMA_DO004
		}
	}
}

country_event = {
	id = IMA_dominion.4 #정치 논의
	title = IMA_dominion.4.t
	desc = IMA_dominion.4.d
	picture = GFX_report_event_canada_treaty

	is_triggered_only = yes
	
	option = {
		name = IMA_dominion.4.a
		add_autonomy_ratio = { 
			value = 0.5
			localization = IMA_DO005
		}
	}
}

country_event = {
	id = IMA_dominion.5 #정치 논의
	title = IMA_dominion.5.t
	desc = IMA_dominion.5.d
	picture = GFX_report_event_canada_treaty

	is_triggered_only = yes
	
	option = {
		name = IMA_dominion.5.a
		add_autonomy_ratio = { 
			value = 0.5
			localization = IMA_DO006
		}
	}
}

country_event = {
	id = IMA_dominion.6 #정치 논의
	title = IMA_dominion.6.t
	desc = IMA_dominion.6.d
	picture = GFX_report_event_canada_treaty

	is_triggered_only = yes
	
	option = {
		name = IMA_dominion.6.a
		add_autonomy_ratio = { 
			value = 0.5
			localization = IMA_DO007
		}
	}
}


#기지를 위한 구축함
country_event = {
	id = IMA_diplomacy.291
	title = IMA_diplomacy.291.t
	desc = IMA_diplomacy.291.d
	picture = GFX_report_event_usa_british_sailors_destroyers

	is_triggered_only = yes
	
	option = {
		name = IMA_diplomacy.291.a
		custom_effect_tooltip = IMA_diplomacy.291.a.tt
		hidden_effect = {
			ENG = {	load_oob = "ENG_destroyers_for_bases_mtg" }
			CAN = { load_oob = "CAN_destroyers_for_bases_mtg" }
			ENG = {
				if = { limit = { 696 = { is_controlled_by = ENG } }
					remove_state_core = 696
				}
				if = { limit = { 331 = { is_controlled_by = ENG } }
					remove_state_core = 331
				}
				if = { limit = { 308 = { is_controlled_by = ENG } } 
					remove_state_core = 308
				}
				if = { limit = { 693 = { is_controlled_by = ENG } } 
					remove_state_core = 693
				}
				if = { limit = { 689 = { is_controlled_by = ENG } } 
					remove_state_core = 689
				}
				if = { limit = { 691 = { is_controlled_by = ENG } } 
					remove_state_core = 691
				}
			}
		}
		USA = {
			if = { limit = { 696 = { is_controlled_by = ENG } }
				transfer_state = 696
			}
			if = { limit = { 331 = { is_controlled_by = ENG } }
				transfer_state = 331
			}
			if = { limit = { 308 = { is_controlled_by = ENG } } 
				transfer_state = 308
			}
			if = { limit = { 693 = { is_controlled_by = ENG } } 
				transfer_state = 693
			}
			if = { limit = { 689 = { is_controlled_by = ENG } } 
				transfer_state = 689
			}
			if = { limit = { 691 = { is_controlled_by = ENG } } 
				transfer_state = 691
			}
			add_opinion_modifier = {
				target = ROOT
				modifier = destroyers_for_bases_opinion
			}
			country_event = { id = IMA_diplomacy.292 days = 3 }
		}
	}

	option = {
		name = IMA_diplomacy.291.b
		USA = { country_event = { id = IMA_diplomacy.293 days = 1 } }
		ai_chance = { factor = 0 }
	}

}

# Britain accepts offer
country_event = {
	id = IMA_diplomacy.292
	title = IMA_diplomacy.292.t
	desc = IMA_diplomacy.292.desc
	picture = GFX_report_event_usa_destroyers

	is_triggered_only = yes
	
	option = { 
		name = IMA_diplomacy.292.a
	}
}

# Britain refuses offer
country_event = {
	id = IMA_diplomacy.293
	title = IMA_diplomacy.293.t
	desc = IMA_diplomacy.293.d
	picture = GFX_report_event_usa_destroyers

	is_triggered_only = yes
	
	option = { 
		name = IMA_diplomacy.293.a
	}
}