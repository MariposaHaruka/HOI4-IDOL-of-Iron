peace_ai_desires = {
	do_not_grant_states_randomly = {
		peace_action_type = take_states
		enable = {
			NOT = { tag = ROOT.FROM }
		}
		ai_desire = -400
	}

	take_states_default_restrictions = {
		peace_action_type = take_states
		enable = {
			tag = ROOT.FROM
			if = {
				limit = { is_subject = yes }
				#subjects will always take cores/claims
				ROOT.FROM.FROM.FROM = {
					NOT = { is_claimed_by = ROOT }
					NOT = { is_core_of = ROOT }
				}
			}
			else = {
				#tags will always take cores/claims/ambitions
				ROOT.FROM.FROM.FROM = {
					NOT = { is_claimed_by = ROOT }
					NOT = { is_core_of = ROOT }
				}
			}
			OR = {
				#minor countries should stick to cores/claims/ambitions if in a conference with majors
				AND = {
					is_major = no
					is_subject = no
					#sanity double-check for edge cases of multiple simultaneous PCs
				}
				#subjects should stick to cores/claims/ambitions if in a conference with non-subjects
				is_subject = yes
				#faction members shouldn't try to take cores/claims/ambitions of other allies
				AND = {
					is_in_faction = yes
					any_allied_country = {
						pc_is_winner = yes
						if = {
							limit = { is_subject = yes }
							ROOT.FROM.FROM.FROM = {
								OR = {
									is_claimed_by = PREV
									is_core_of = PREV
								}
							}
						}
						else = {
							ROOT.FROM.FROM.FROM = {
								OR = {
									is_claimed_by = PREV
									is_core_of = PREV
								}
							}
						}
					}
				}
				#overlords shouldn't try to take cores/claims/ambitions of their subjects
				AND = {
					num_subjects > 0
					any_subject_country = {
						pc_is_winner = yes
						ROOT.FROM.FROM.FROM = {
							OR = {
								is_claimed_by = PREV
								is_core_of = PREV
							}
						}
					}
				}
				#subjects shouldn't try to take cores/claims/ambitions of the overlord or other puppets
				AND = {
					is_subject = yes
					OR = {
						overlord = {
							pc_is_winner = yes
							ROOT.FROM.FROM.FROM = {
								OR = {
									is_claimed_by = PREV
									is_core_of = PREV
								}
							}
						}
						overlord = {
							any_subject_country = {
								pc_is_winner = yes
								ROOT.FROM.FROM.FROM = {
									OR = {
										is_claimed_by = PREV
										is_core_of = PREV
									}
								}
							}
						}
					}
				}
			}
		}
		ai_desire = -1000
	}

	take_states_own_cores = {
		peace_action_type = { take_states }
		enable = {
			tag = ROOT.FROM
			ROOT.FROM.FROM.FROM = { is_core_of = ROOT.FROM }
		}
		ai_desire = 90
	}

	take_states_own_claims = {
		peace_action_type = { take_states }
		enable = {
			tag = ROOT.FROM
			ROOT.FROM.FROM.FROM = {
				is_claimed_by = ROOT.FROM
				NOT = { is_core_of = ROOT.FROM }
			}
		}
		ai_desire = 60
	}

	take_states_own_ambitions = {
		peace_action_type = { take_states }
		enable = {
			tag = ROOT.FROM
			ROOT.FROM.FROM.FROM = {
				NOT = { is_claimed_by = ROOT.FROM }
				NOT = { is_core_of = ROOT.FROM }
			}
		}
		ai_desire = 30
	}

	give_states_default_restrictions = {
		peace_action_type = take_states
		enable = {
			NOT = { tag = ROOT.FROM }
			OR = {
				#never give away cores/claims/ambitions
				ROOT.FROM.FROM.FROM = {
					OR = {
						is_core_of = ROOT
						is_claimed_by = ROOT
					}
				}
				#never give away cores/claims/ambitions of the overlord
				AND = {
					is_subject = yes
					overlord = {
						NOT = { tag = ROOT.FROM }
						ROOT.FROM.FROM.FROM = {
							OR = {
								is_core_of = PREV
								is_claimed_by = PREV
							}
						}
					}
				}
				#don't contest core/claims/ambitions claimed by allies
				if = {
					limit = { is_in_faction = yes }
					ROOT.FROM.FROM.FROM = { pc_is_state_claimed = yes }
					any_allied_country = {
						pc_is_winner = yes
						NOT = { tag = ROOT.FROM }
						ROOT.FROM.FROM.FROM = {
							OR = {
								is_core_of = PREV
								is_claimed_by = PREV
							}
						}
					}
				}
				else = {
					ROOT.FROM.FROM.FROM = { pc_is_state_claimed = yes }
					any_subject_country = {
						pc_is_winner = yes
						NOT = { tag = ROOT.FROM }
						ROOT.FROM.FROM.FROM = {
							OR = {
								is_core_of = PREV
								is_claimed_by = PREV
							}
						}
					}
				}
			}
		}
		ai_desire = -1000
	}

	give_states_cores = {
		peace_action_type = take_states
		enable = {
			NOT = { tag = ROOT.FROM }
			ROOT.FROM.FROM.FROM = { is_core_of = ROOT.FROM }
			is_ally_with = ROOT.FROM
		}
		ai_desire = 430 #offsets do_not_grant_states_randomly
	}

	give_states_claims = {
		peace_action_type = take_states
		enable = {
			NOT = { tag = ROOT.FROM }
			ROOT.FROM.FROM.FROM = {
				is_claimed_by = ROOT.FROM
				NOT = { is_core_of = ROOT.FROM }
			}
			is_ally_with = ROOT.FROM
		}
		ai_desire = 420 #offsets do_not_grant_states_randomly
	}

	give_states_ambitions = {
		peace_action_type = take_states
		enable = {
			NOT = { tag = ROOT.FROM }
			ROOT.FROM.FROM.FROM = {
				NOT = { is_claimed_by = ROOT.FROM }
				NOT = { is_core_of = ROOT.FROM }
			}
			is_ally_with = ROOT.FROM
			ROOT.FROM = { is_subject = no }
		}
		ai_desire = 410 #offsets do_not_grant_states_randomly
	}

	give_states_other = {
		peace_action_type = take_states
		enable = {
			pc_turn > 9
			if = {
				limit = { is_subject = yes }
				ROOT.FROM = { tag = ROOT.overlord }
			}
			else = {
				ROOT.FROM = { tag = ROOT.faction_leader }
				is_major = no
			}
		}
		ai_desire = 400 #offsets do_not_grant_states_randomly
	}

	### 식민지 관련
	base_puppet_liberate_force_government_desire = {
		peace_action_type = { puppet liberate force_government }
		enable = {
			always = yes
		}
		ai_desire = -400
	}

	ignore_puppet_liberate_or_force_government_if_claimed = {
		peace_action_type = { puppet liberate force_government }
		enable = {
			ROOT.FROM.FROM.FROM = {
				OR = {
					is_claimed_by = ROOT
					is_core_of = ROOT
				}
			}
		}
		ai_desire = -1000
	}

	ignore_puppet_liberate_or_force_government_if_claimed_by_ally = {
		peace_action_type = { puppet liberate force_government }
		enable = {
			if = {
				limit = { is_in_faction = yes }
				any_allied_country = {
					pc_is_winner = yes
					if = {
						limit = { is_subject = yes }
						ROOT.FROM.FROM.FROM = {
							OR = {
								is_claimed_by = PREV
								is_core_of = PREV
							}
						}
					}
					else = {
						ROOT.FROM.FROM.FROM = {
							OR = {
								is_claimed_by = PREV
								is_core_of = PREV
							}
						}
					}
				}
			}
			else = {
				num_subjects > 0
				any_subject_country = {
					pc_is_winner = yes
					ROOT.FROM.FROM.FROM = {
						OR = {
							is_claimed_by = PREV
							is_core_of = PREV
						}
					}
				}
			}
		}
		ai_desire = -1000
	}
}